┌─────────────────────────────────────────────────────────────────────┐
│                    GITHUB SUBMODULES - QUICK REFERENCE              │
│              Migrasi Backend Services ke Repository Terpisah        │
└─────────────────────────────────────────────────────────────────────┘

📋 PERSIAPAN
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. Autentikasi GitHub CLI:
   $ gh auth login
   
   Pilih: GitHub.com → HTTPS → Yes → Login with browser
   Copy kode yang muncul, paste di browser

2. Cek kesiapan:
   $ ./preflight-check.sh

3. Jalankan migrasi:
   $ ./migrate-to-submodules.sh
   
   Script akan otomatis:
   - Membuat & push repositories
   - Convert ke submodules
   - Make all repos public
   - Docker compose up -d
   - Fix ECONNREFUSED errors


🎯 YANG AKAN DIBUAT
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Repository Baru (Semua PUBLIC):
  ✓ github.com/PetaTalenta/api-gateway
  ✓ github.com/PetaTalenta/admin-service
  ✓ github.com/PetaTalenta/analysis-worker
  ✓ github.com/PetaTalenta/documentation-service
  ✓ github.com/PetaTalenta/chatbot-service
  ✓ github.com/PetaTalenta/notification-service
  ✓ github.com/PetaTalenta/backend (dibuat public)


🔄 WORKFLOW SETELAH MIGRASI
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Clone Repository:
  $ git clone --recursive https://github.com/PetaTalenta/backend.git

Update Submodules:
  $ git submodule update --remote --merge

Edit Service:
  $ cd api-gateway/
  $ git add . && git commit -m "Update" && git push
  $ cd ..
  $ git add api-gateway && git commit -m "Update submodule" && git push


⚡ PERINTAH PENTING
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Init submodules setelah clone
$ git submodule update --init --recursive

# Status semua submodules
$ git submodule status

# Pull latest dari semua submodules
$ git submodule update --remote --merge

# Foreach command (jalankan di semua submodules)
$ git submodule foreach 'git pull origin main'

# Cek repository di GitHub
$ gh repo view PetaTalenta/backend
$ gh repo view PetaTalenta/api-gateway


🛡️ BACKUP & ROLLBACK
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Backup otomatis dibuat di:
  ../atma-backend-backup-YYYYMMDD_HHMMSS/

Rollback:
  $ cd /home/rayin/Desktop
  $ rm -rf atma-backend
  $ mv atma-backend-backup-YYYYMMDD_HHMMSS atma-backend


🐛 TROUBLESHOOTING
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Auth Error:
  $ gh auth refresh

Submodule Empty:
  $ git submodule update --init --recursive

Docker ECONNREFUSED:
  $ ./fix-docker-econnrefused.sh
  $ docker-compose restart analysis-worker
  $ docker-compose restart notification-service
  $ docker-compose logs -f <service-name>

Reset Submodule:
  $ git submodule deinit -f <service>
  $ rm -rf .git/modules/<service>
  $ git rm -f <service>
  $ git submodule add https://github.com/PetaTalenta/<service>.git


✅ VERIFIKASI
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

$ git submodule status
$ gh repo list PetaTalenta
$ gh repo view PetaTalenta/backend


📚 DOKUMENTASI LENGKAP
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

→ PANDUAN_MIGRASI_SUBMODULES.md (Bahasa Indonesia)
→ MIGRATION_TO_SUBMODULES.md (English)

┌─────────────────────────────────────────────────────────────────────┐
│ 💡 TIP: Simpan file ini sebagai referensi cepat!                   │
└─────────────────────────────────────────────────────────────────────┘
